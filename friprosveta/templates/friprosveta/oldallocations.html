<html>
<head>
<title>URNIK</title>
<meta name="GENERATOR" CONTENT="Urnik">
<meta http-equiv="Content-Type" content="text/html; charset=utf8">
<style type="text/css">
    body {
        color:#000080;
        background-color: white;
    }
    a.activity{
        color:#800000;
    }
    a.teacher{
        color:#000080;
    }
    a.group{
        color:#000000;
    }
    a.classroom{
        color:#008000;
    }
</style>
</head>
<body>
<script language="JavaScript"> 
<!-- Hide the script from old browsers -- 
function nextAllocations(elt) {
    timetableElt = document.getElementById("id_timetable")
    i = timetableElt.attributes.getNamedItem("value").nodeValue
    timetableParam = ""
    if (i != "")
        timetableParam = '&timetable='+i;
    location=elt.href + timetableParam;
    return true;
}
//--> 
</script> 
<h1 id="id_timetable" value="{{timetable.id|default_if_none:""}}">{{timetable|default_if_none:"VSI URNIKI"}}</h1>

<table border = 5 bgcolor="#FFFFFF" >
    <tr bgcolor="#F0F0F0" ><th>Ura</th><th>Ponedeljek</th><th>Torek</th><th>Sreda</th><th>Cetrtek</th><th>Petek</th>
    {% for hour,hour_allocations in allocations_by_hour %}
    <tr>
        <td BGCOLOR="#F0F0F0" WIDTH = 50 >{{hour}}</td>
        {% for day_allocations in hour_allocations %}
            {% if day_allocations == Null %}
        <td width = 150>
            &nbsp
        </td>
            {% else %}
        <td bgcolor="#FFFFCC"  width = 150>
                {% for allocation in day_allocations %}
                    {{allocation.id}}
                    {% if forloop.first or "activity" not in setParams %}
            <a class="activity" onClick="return !nextAllocations(this)", href="?activity={{allocation.activity.activity.id}}">{{allocation.activity.activity}}</a><br/>
                    {% endif %}
                    {% if forloop.first or "teacher" not in setParams %}
                        {% for teacher in allocation.teachers.all %}            
            <a class="teacher" onClick="return !nextAllocations(this)", href="?teacher={{teacher.id}}">{{teacher}}</a><br/>
                        {% endfor %}
                    {% endif %}
                    {% if forloop.first or "group" not in setParams %}
                        {% for studyGroup in allocation.activity.studyGroups.all %}
            <a class="group" onClick="return !nextAllocations(this)", href="?group={{studyGroup.id}}">{{studyGroup}}</a><br/>
                        {% endfor %}
                    {% endif %}
                    {% if forloop.first or "classroom" not in setParams %}
            <a class="classroom" onClick="return !nextAllocations(this)", href="?classroom={{allocation.classroom.id}}">{{allocation.classroom}}</a><br/>
                    {% endif %}
                {% endfor %}
        </td>
            {% endif %}
        {% endfor %}
    </tr>
    {% endfor %}
</table>
</body>
</html>
